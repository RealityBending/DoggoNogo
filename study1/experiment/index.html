<!DOCTYPE html>
<html>
    <head>
        <!-- Title shown in tab -->
        <title>University of Sussex - Research</title>

        <!-- Load all necessary plugins -->
        <script src="https://unpkg.com/jspsych"></script>
        <script src="https://unpkg.com/@jspsych/plugin-browser-check"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-text"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-likert"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-button-response"></script>
        <script src="https://realitybending.github.io/JSmisc/jspsych_extensions/plugin-multiple-slider.js"></script>

        <!-- Load parameters here (always below the loading of the JsPsych) -->
        <script src="demographics.js"></script>
        <script src="questionnaires.js"></script>

        <link href="https://unpkg.com/jspsych/css/jspsych.css" rel="stylesheet" type="text/css" />
    </head>

    <body></body>

    <script>
        // Initialize experiment =================================================
        var timeline = []

        var jsPsych = initJsPsych({
            on_finish: function () {
                // Display data in browser (useful for debugging)
                jsPsych.data.displayData("json")
                jsPsych.data
                    .get()
                    .localSave("json", `${jsPsych.data.get().values()[0]["participant_id"]}.json`)
            },
        })

        // Session and Participant Info ----------------------------------------
        timeline.push(demographics_participant_id)
        timeline.push(demographics_browser_info)
        timeline.push(demographics_consent("Experimenter1"))
        timeline.push(demographics_info)
        timeline.push(demographics_endscreen)
        timeline.push(questionnaire_phq4)
        timeline.push(questionnaire_ipip6)
        timeline.push(questionnaire_exercise)
        timeline.push(questionnaire_virtualstim)

        /* ----------------- Run the timeline ----------------- */
        jsPsych.run(timeline)
        // jsPsych.simulate(timeline, "data-only")
    </script>
</html>
